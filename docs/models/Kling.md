# å¯çµ (Kling) è§†é¢‘ç”Ÿæˆ API æ–‡æ¡£

å¯çµ AI æ˜¯ä¸€ä¸ªå¼ºå¤§çš„è§†é¢‘ç”ŸæˆæœåŠ¡ï¼Œæ”¯æŒæ–‡æœ¬ç”Ÿæˆè§†é¢‘å’Œå›¾ç‰‡ç”Ÿæˆè§†é¢‘åŠŸèƒ½ã€‚

## ğŸ“‹ ç›®å½•

- [æ”¯æŒçš„æ¥å£](#æ”¯æŒçš„æ¥å£)
- [æ¨¡å‹åˆ—è¡¨](#æ¨¡å‹åˆ—è¡¨)
- [æ¥å£è¯¦æƒ…](#æ¥å£è¯¦æƒ…)
  - [é€šç”¨è§†é¢‘ç”Ÿæˆæ¥å£](#é€šç”¨è§†é¢‘ç”Ÿæˆæ¥å£)
  - [å¯çµä¸“ç”¨æ¥å£](#å¯çµä¸“ç”¨æ¥å£)
- [æ¸ é“é…ç½®](#æ¸ é“é…ç½®)
- [é”™è¯¯ç è¯´æ˜](#é”™è¯¯ç è¯´æ˜)

## ğŸ”Œ æ”¯æŒçš„æ¥å£

### 1. é€šç”¨è§†é¢‘ç”Ÿæˆæ¥å£
- **POST** `/v1/video/generations` - åˆ›å»ºè§†é¢‘ç”Ÿæˆä»»åŠ¡
- **GET** `/v1/video/generations/{task_id}` - æŸ¥è¯¢ä»»åŠ¡çŠ¶æ€

### 2. å¯çµä¸“ç”¨æ¥å£
- **POST** `/kling/v1/videos/text2video` - æ–‡æœ¬ç”Ÿæˆè§†é¢‘
- **POST** `/kling/v1/videos/image2video` - å›¾ç‰‡ç”Ÿæˆè§†é¢‘

### 3. ç‰¹æ®ŠåŠŸèƒ½
- **è™šæ‹Ÿè¯•è¡£ (Virtual Try-on)** - æ”¯æŒæœè£…ã€é…é¥°ç­‰è™šæ‹Ÿæ¢è£…

## ğŸ¯ æ¨¡å‹åˆ—è¡¨

| æ¨¡å‹åç§° | æè¿° | ç‰¹ç‚¹ |
|---------|------|------|
| `kling-v1` | å¯çµ V1 åŸºç¡€ç‰ˆæœ¬ | æ ‡å‡†è´¨é‡ï¼Œå¿«é€Ÿç”Ÿæˆ |
| `kling-v1-6` | å¯çµ V1.6 ç‰ˆæœ¬ | æ”¹è¿›çš„è´¨é‡å’Œç¨³å®šæ€§ |
| `kling-v2-master` | å¯çµ V2 ä¸»ç‰ˆæœ¬ | æœ€æ–°æŠ€æœ¯ï¼Œæœ€é«˜è´¨é‡ |

## ğŸ“– æ¥å£è¯¦æƒ…

### é€šç”¨è§†é¢‘ç”Ÿæˆæ¥å£

#### åˆ›å»ºè§†é¢‘ç”Ÿæˆä»»åŠ¡

**è¯·æ±‚åœ°å€ï¼š** `POST /v1/video/generations`

**è¯·æ±‚å¤´ï¼š**
```http
Authorization: sk-xxxxxxxxxxxxxx
Content-Type: application/json
```

**è¯·æ±‚å‚æ•°ï¼š**

| å‚æ•°å | ç±»å‹ | å¿…å¡« | æè¿° | ç¤ºä¾‹å€¼ |
|-------|------|------|------|-------|
| `model` | string | å¦ | æ¨¡å‹åç§° | `"kling-v1"` |
| `prompt` | string | æ˜¯ | æ–‡æœ¬æè¿° | `"ä¸€åªå°çŒ«åœ¨èŠ±å›­é‡Œç©è€"` |
| `image` | string | å¦ | å‚è€ƒå›¾ç‰‡URLæˆ–Base64 | `"https://example.com/image.jpg"` |
| `duration` | float64 | æ˜¯ | è§†é¢‘æ—¶é•¿ï¼ˆç§’ï¼‰ | `5.0` |
| `width` | int | å¦ | è§†é¢‘å®½åº¦ | `1280` |
| `height` | int | å¦ | è§†é¢‘é«˜åº¦ | `720` |
| `fps` | int | å¦ | å¸§ç‡ | `30` |
| `seed` | int | å¦ | éšæœºç§å­ | `12345` |
| `n` | int | å¦ | ç”Ÿæˆæ•°é‡ | `1` |
| `response_format` | string | å¦ | å“åº”æ ¼å¼ | `"url"` |
| `metadata` | object | å¦ | æ‰©å±•å‚æ•° | è§ä¸‹æ–¹è¯´æ˜ |

**metadata æ‰©å±•å‚æ•°ï¼š**

| å‚æ•°å | ç±»å‹ | æè¿° | ç¤ºä¾‹å€¼ |
|-------|------|------|-------|
| `negative_prompt` | string | è´Ÿé¢æç¤ºè¯ | `"æ¨¡ç³Šï¼Œä½è´¨é‡"` |
| `cfg_scale` | float64 | ç”Ÿæˆéµå¾ªåº¦ (0-1) | `0.7` |
| `mode` | string | ç”Ÿæˆæ¨¡å¼ (`std`/`pro`) | `"std"` |
| `aspect_ratio` | string | å®½é«˜æ¯” | `"16:9"` |
| `callback_url` | string | å›è°ƒåœ°å€ | `"https://example.com/callback"` |
| `external_task_id` | string | è‡ªå®šä¹‰ä»»åŠ¡ID | `"my-task-001"` |

**è¯·æ±‚ç¤ºä¾‹ï¼š**

```json
{
  "model": "kling-v1-6",
  "prompt": "ä¸€åªå¯çˆ±çš„å°çŒ«åœ¨é˜³å…‰æ˜åªšçš„èŠ±å›­é‡Œè¿½é€è´è¶ï¼Œç”»é¢æ¸©é¦¨ç¾å¥½",
  "duration": 5.0,
  "width": 1280,
  "height": 720,
  "metadata": {
    "negative_prompt": "æ¨¡ç³Šï¼Œä½è´¨é‡ï¼Œæ‰­æ›²",
    "cfg_scale": 0.7,
    "mode": "pro",
    "aspect_ratio": "16:9"
  }
}
```

**å“åº”ç¤ºä¾‹ï¼š**

```json
{
  "task_id": "cls2a3b4c5d6e7f8g9h0i1j2"
}
```

#### æŸ¥è¯¢ä»»åŠ¡çŠ¶æ€

**è¯·æ±‚åœ°å€ï¼š** `GET /v1/video/generations/{task_id}`

**è¯·æ±‚å¤´ï¼š**
```http
Authorization: sk-xxxxxxxxxxxxxx
```

**å“åº”ç¤ºä¾‹ï¼š**

```json
{
  "task_id": "cls2a3b4c5d6e7f8g9h0i1j2",
  "status": "succeeded",
  "url": "https://storage.klingai.com/videos/example.mp4",
  "format": "mp4",
  "metadata": {
    "duration": 5.0,
    "fps": 30,
    "width": 1280,
    "height": 720,
    "seed": 12345
  }
}
```

**ä»»åŠ¡çŠ¶æ€è¯´æ˜ï¼š**

| çŠ¶æ€ | æè¿° |
|-----|------|
| `submitted` | å·²æäº¤ |
| `processing` | å¤„ç†ä¸­ |
| `succeeded` | æˆåŠŸ |
| `failed` | å¤±è´¥ |

### å¯çµä¸“ç”¨æ¥å£

#### æ–‡æœ¬ç”Ÿæˆè§†é¢‘

**è¯·æ±‚åœ°å€ï¼š** `POST /kling/v1/videos/text2video`

**è¯·æ±‚å‚æ•°ï¼š**

```json
{
  "model_name": "kling-v1-6",
  "prompt": "ä¸€åªå°çŒ«åœ¨æœˆå…‰ä¸‹å¥”è·‘",
  "negative_prompt": "é»‘æš—çš„åœºæ™¯",
  "cfg_scale": 0.7,
  "mode": "pro",
  "aspect_ratio": "16:9",
  "duration": "5",
  "camera_control": {
    "type": "simple",
    "config": {
      "horizontal": 2.5,
      "vertical": 0,
      "pan": 0,
      "tilt": 0,
      "roll": 0,
      "zoom": 0
    }
  },
  "callback_url": "https://your.domain/callback",
  "external_task_id": "custom-task-001"
}
```

#### å›¾ç‰‡ç”Ÿæˆè§†é¢‘

**è¯·æ±‚åœ°å€ï¼š** `POST /kling/v1/videos/image2video`

**è¯·æ±‚å‚æ•°ï¼š**

```json
{
  "model_name": "kling-v2-master",
  "image": "https://example.com/image.jpg",
  "prompt": "è®©å›¾ä¸­çš„å°çŒ«åŠ¨èµ·æ¥ï¼Œåœ¨èŠ±å›­é‡Œç©è€",
  "negative_prompt": "æ¨¡ç³Šï¼Œä½è´¨é‡",
  "cfg_scale": 0.7,
  "mode": "std",
  "aspect_ratio": "16:9",
  "duration": "5",
  "callback_url": "https://your.domain/callback",
  "external_task_id": "custom-task-002"
}
```

**å“åº”æ ¼å¼ï¼š**

```json
{
  "code": 0,
  "message": "æˆåŠŸ",
  "request_id": "Cl6Mq2bftxoAAAAAAA_SxQ",
  "data": {
    "task_id": "Cl6Mq2bftxoAAAAAAA_SxQ",
    "task_status": "submitted",
    "created_at": 1725974776706,
    "updated_at": 1725974776706
  }
}
```

#### è™šæ‹Ÿè¯•è¡£ (Virtual Try-on)

è™šæ‹Ÿè¯•è¡£æ˜¯å¯çµ AI çš„ç‰¹è‰²åŠŸèƒ½ï¼Œå¯ä»¥è®©äººç‰©æ¢è£…ã€è¯•ç©¿ä¸åŒçš„æœé¥°ã€‚

**ä½¿ç”¨æ–¹å¼ï¼š** é€šè¿‡ `/kling/v1/videos/image2video` æ¥å£å®ç°

**è¯·æ±‚ç¤ºä¾‹ï¼š**

```json
{
  "model_name": "kling-v2-master",
  "image": "https://example.com/person-image.jpg",
  "prompt": "è¿™ä¸ªäººç©¿ä¸Šä¸€ä»¶çº¢è‰²çš„è¿è¡£è£™ï¼Œä¿æŒåŸæœ‰çš„å§¿åŠ¿å’Œè¡¨æƒ…",
  "negative_prompt": "æ¨¡ç³Šï¼Œå˜å½¢ï¼Œä¸è‡ªç„¶",
  "cfg_scale": 0.8,
  "mode": "pro",
  "aspect_ratio": "9:16",
  "duration": "3",
  "metadata": {
    "style": "fashion",
    "quality": "high",
    "try_on": true
  }
}
```

**è™šæ‹Ÿè¯•è¡£æç¤ºè¯å»ºè®®ï¼š**

1. **æœè£…æ›¿æ¢ï¼š**
   - `"å°†å›¾ä¸­äººç‰©çš„è¡£æœæ¢æˆè“è‰²ç‰›ä»”è£¤å’Œç™½è‰²Tæ¤"`
   - `"è®©è¿™ä¸ªäººç©¿ä¸Šæ­£å¼çš„è¥¿è£…ï¼Œä¿æŒåŸæœ‰å§¿åŠ¿"`
   - `"ä¸ºå›¾ä¸­çš„å¥³æ€§æ¢ä¸Šä¼˜é›…çš„æ™šç¤¼æœ"`

2. **é…é¥°æ·»åŠ ï¼š**
   - `"ä¸ºè¿™ä¸ªäººæˆ´ä¸Šæ—¶å°šçš„å¤ªé˜³é•œ"`
   - `"ç»™å›¾ä¸­äººç‰©åŠ ä¸Šä¸€é¡¶å¸½å­"`
   - `"ä¸ºå¥¹æˆ´ä¸Šç²¾ç¾çš„é¡¹é“¾å’Œè€³ç¯"`

3. **é£æ ¼å˜æ¢ï¼š**
   - `"å°†å›¾ä¸­äººç‰©çš„é€ å‹æ”¹ä¸ºéŸ©å¼é£æ ¼"`
   - `"è®©è¿™ä¸ªäººçš„ç©¿æ­å˜æˆå¤å¤é£æ ¼"`
   - `"æ”¹ä¸ºå•†åŠ¡æ­£è£…çš„é€ å‹"`

**æ³¨æ„äº‹é¡¹ï¼š**
- åŸå§‹å›¾ç‰‡ä¸­çš„äººç‰©å§¿åŠ¿è¦æ¸…æ™°
- å»ºè®®ä½¿ç”¨é«˜åˆ†è¾¨ç‡çš„äººç‰©å›¾ç‰‡
- é¿å…è¿‡äºå¤æ‚çš„èƒŒæ™¯
- æç¤ºè¯è¦å…·ä½“æè¿°æƒ³è¦çš„æœè£…é£æ ¼

## âš™ï¸ æ¸ é“é…ç½®

### æ¸ é“ç±»å‹
- **æ¸ é“ç±»å‹ï¼š** `50` (Kling)

### é…ç½®æ–¹å¼

#### 1. å®˜æ–¹å¯çµ API é…ç½®

**å¯†é’¥æ ¼å¼ï¼š**
```
access_key|secret_key
```

**é…ç½®ç¤ºä¾‹ï¼š**
- **æ¸ é“åç§°ï¼š** å¯çµAIå®˜æ–¹
- **Base URLï¼š** `https://api.klingai.com`
- **å¯†é’¥ï¼š** `your_access_key|your_secret_key`
- **æ¨¡å‹ï¼š** `kling-v1,kling-v1-6,kling-v2-master`

#### 2. ç¬¬ä¸‰æ–¹ä»£ç†é…ç½®

**å¯†é’¥æ ¼å¼ï¼š**
```
sk-xxxxxxxxxxxxxx
```

**é…ç½®ç¤ºä¾‹ï¼š**
- **æ¸ é“åç§°ï¼š** rix_kling (ç¬¬ä¸‰æ–¹ä»£ç†)
- **Base URLï¼š** `https://api.ephone.chat/kling`
- **å¯†é’¥ï¼š** `sk-Z4hKBYAEcL9IkaypMi3mlawoMvzXWtQLgA997La5uGNniPza`
- **æ¨¡å‹ï¼š** `kling_image,kling_video,kling_extend,kling_effects,kling_lip_sync,kling_virtual_try_on,kling_image_expand`

### è‡ªåŠ¨æ£€æµ‹æœºåˆ¶

ç³»ç»Ÿä¼šæ ¹æ® Base URL è‡ªåŠ¨æ£€æµ‹ä½¿ç”¨å“ªç§è®¤è¯æ–¹å¼ï¼š

- **å®˜æ–¹åŸŸå** (`api.klingai.com`, `klingai.com`, `kling.kuaishou.com`)ï¼šä½¿ç”¨ JWT è®¤è¯
- **ç¬¬ä¸‰æ–¹åŸŸå**ï¼šç›´æ¥ä½¿ç”¨ Bearer Token è®¤è¯

### JWT è®¤è¯

å¯çµ API ä½¿ç”¨ JWT è®¤è¯æ–¹å¼ï¼š

```javascript
// JWT Token ç»“æ„
{
  "iss": "access_key",     // ç­¾å‘è€…ï¼ˆaccess_keyï¼‰
  "exp": now + 1800,       // è¿‡æœŸæ—¶é—´ï¼ˆ30åˆ†é’Ÿï¼‰
  "nbf": now - 5,          // ç”Ÿæ•ˆæ—¶é—´
  "typ": "JWT"             // ä»¤ç‰Œç±»å‹
}
```

## ğŸ”„ å®½é«˜æ¯”æ˜ å°„

| è¾“å…¥å°ºå¯¸ | å®½é«˜æ¯” |
|---------|-------|
| `1024x1024`, `512x512` | `1:1` |
| `1280x720`, `1920x1080` | `16:9` |
| `720x1280`, `1080x1920` | `9:16` |
| å…¶ä»– | `1:1` (é»˜è®¤) |

## âŒ é”™è¯¯ç è¯´æ˜

### å¸¸è§é”™è¯¯

| é”™è¯¯ç  | æè¿° | è§£å†³æ–¹æ¡ˆ |
|-------|------|----------|
| `400` | è¯·æ±‚å‚æ•°é”™è¯¯ | æ£€æŸ¥å¿…å¡«å‚æ•°å’Œå‚æ•°æ ¼å¼ |
| `401` | è®¤è¯å¤±è´¥ | æ£€æŸ¥ API å¯†é’¥æ ¼å¼å’Œæœ‰æ•ˆæ€§ |
| `403` | æ— æƒé™ | æ£€æŸ¥è´¦æˆ·ä½™é¢å’Œæƒé™è®¾ç½® |
| `429` | è¯·æ±‚è¿‡äºé¢‘ç¹ | é™ä½è¯·æ±‚é¢‘ç‡ |
| `500` | æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ | ç¨åé‡è¯•æˆ–è”ç³»æŠ€æœ¯æ”¯æŒ |

### ä»»åŠ¡çŠ¶æ€é”™è¯¯

```json
{
  "task_id": "cls2a3b4c5d6e7f8g9h0i1j2",
  "status": "failed",
  "error": {
    "code": 4001,
    "message": "è§†é¢‘ç”Ÿæˆå¤±è´¥ï¼šæç¤ºè¯åŒ…å«ä¸å½“å†…å®¹"
  }
}
```

## ğŸ“ ä½¿ç”¨å»ºè®®

### 1. æç¤ºè¯ä¼˜åŒ–
- ä½¿ç”¨å…·ä½“ã€è¯¦ç»†çš„æè¿°
- é¿å…æ¨¡ç³Šæˆ–çŸ›ç›¾çš„è¡¨è¾¾
- æ·»åŠ é£æ ¼ã€æƒ…æ„Ÿç­‰ä¿®é¥°è¯

### 2. å‚æ•°è°ƒä¼˜
- `cfg_scale`: 0.5-0.8 é€šå¸¸æ•ˆæœè¾ƒå¥½
- `mode`: `pro` æ¨¡å¼è´¨é‡æ›´é«˜ä½†è€—æ—¶æ›´é•¿
- `duration`: å»ºè®® 3-10 ç§’ï¼Œé¿å…è¿‡é•¿

### 3. æ€§èƒ½ä¼˜åŒ–
- åˆç†è®¾ç½®è§†é¢‘åˆ†è¾¨ç‡
- ä½¿ç”¨å›è°ƒ URL é¿å…è½®è¯¢
- æ‰¹é‡æäº¤æ—¶æ§åˆ¶å¹¶å‘æ•°

### 4. é”™è¯¯å¤„ç†
- å®ç°é‡è¯•æœºåˆ¶
- ç›‘æ§ä»»åŠ¡çŠ¶æ€å˜åŒ–
- åŠæ—¶å¤„ç†å¤±è´¥ä»»åŠ¡

## ğŸ”— ç›¸å…³é“¾æ¥

- [å¯çµAIå®˜ç½‘](https://klingai.com)
- [APIæ–‡æ¡£](https://app.klingai.com/cn/dev/document-api)
- [æ§åˆ¶å°](https://app.klingai.com/cn/dev/key)

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·è”ç³»ï¼š
- å®˜æ–¹æ–‡æ¡£ï¼š[APIå‚è€ƒ](https://app.klingai.com/cn/dev/document-api/apiReference/commonInfo)
- æŠ€æœ¯äº¤æµï¼šæŸ¥çœ‹å®˜æ–¹å¼€å‘è€…ç¤¾åŒº
